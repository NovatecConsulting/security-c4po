<div *ngIf="!projectsLoaded" class="align-content-center loading" style="height: 100%;">
  <mat-spinner color="accent" [diameter]="24" style="margin:0 auto; top: 50%;"></mat-spinner>
</div>

<mat-grid-list cols="3" rowHeight="1:1">
  <mat-grid-tile *ngIf="projectsLoaded">
    <app-new-project class="example-card new-card"></app-new-project>
  </mat-grid-tile>
  <!--<mat-grid-tile *ngIf="!projectsLoaded">-->
    <!--<mat-card class="example-card mat-elevation-z6 new-card">-->
      <!--<div class="align-content-center" style="height: 100%;">-->
        <!--<mat-spinner color="accent" [diameter]="24" style="margin:0 auto; top: 45%;"></mat-spinner>-->
      <!--</div>-->
    <!--</mat-card>-->
  <!--</mat-grid-tile>-->
  <ng-container *ngIf="dashboardService.project$ | async as projects">
    <mat-grid-tile *ngFor="let project of projects" [colspan]="1" [rowspan]="1"
                   (click)="onProjectCardClick(project.id)">
      <mat-card class="project-card mat-elevation-z4">
        <mat-card-header>
          <img mat-card-avatar class="example-header-image" src="../../assets/customer-logo/e-corp.png" alt="?">
          <!--</img>-->
          <mat-card-title>{{project.title}}</mat-card-title>
          <mat-card-subtitle>{{project.client}}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content style="flex-grow: 1;">
          <b>ID: </b>{{project.id}}
          <br>
          <b>Created: </b>{{project.createdAt}}
          <br>
          <!--<b>Last modified: </b>?-->
          <b>Tester: </b>{{project.testerName}}
          <br>
          <b>Tests performed: </b><span class="badge badge-dark">{{checked[project.id]?.total}} / 90</span>
        </mat-card-content>
        <mat-card-footer>
          <mat-progress-bar mode="determinate" color="accent" [value]=checked[project.id]?.percentage></mat-progress-bar>
        </mat-card-footer>
      </mat-card>
    </mat-grid-tile>
  </ng-container>
</mat-grid-list>
